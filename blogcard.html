//内部リンクをブログカードにするショートコード
function show_blogcard($atts) {
    extract(shortcode_atts(array(
        'url'=>"",
        'title'=>"",
        'excerpt'=>""
    ),$atts));
    
    //URLから投稿IDを取得
    $id = url_to_postid($url);
    //画像サイズの横幅を指定
    $img_width ="90";
    //画像サイズの高さを指定
    $img_height = "90";
    //アイキャッチ画像がない場合の画像を指定
    $no_image = '/wp-content/uploads/xxxx/xx/xxx.png';
    
    //タイトルを取得
    if(empty($title)){
        $title = esc_html(get_the_title($id));
    }
    
    //本文を取得
    if(has_excerpt($id)){
        //抜粋文字列がある場合
        $excerpt = wp_trim_words(get_the_excerpt($id), 72, '…' );
    } else {
        //抜粋文字列がない場合本文から切り出し
        $excerpt = wp_trim_words(strip_shortcodes(get_post($id)->post_content), 72, '…' );
    }
    
    //アイキャッチ画像を取得
    if(has_post_thumbnail($id)) {
        $img = wp_get_attachment_image_src(get_post_thumbnail_id($id),array($img_width,$img_height));
        $img_tag = '<img src="'. $img[0] .'" alt="'. $title .'" width="'. $img[1] .'" height="'. $img[2] .'" />';
    } else { 
        $img_tag = '<img src="'. $no_image .'" alt="" width="'. $img_width .'" height="'. $img_height .'" />';
    }
    
    //ブログカード部分のHTML
    $sc_blogcard .='
    <div class="blogcard">
    <a href="'. $url .'">
     <div class="blogcard_thumbnail">'. $img_tag .'</div>
     <div class="blogcard_content">
      <div class="blogcard_title">'. $title .'</div>
      <div class="blogcard_excerpt">'. $excerpt .'</div>
     </div>
     <div class="clear"></div>
    </a>
    </div>';    
    return $sc_blogcard;    
}
# ショートコードに追加
# add_shortcode("sc_blogcard", "show_blogcard");